{"version":3,"sources":["../../src/middlewares/global-middleware.js"],"names":["setGlobalMiddleware","app","use","express","json","limit","urlencoded","extended","bodyParser","maxAge","keys","mainConfig","cookieKey","req","res","next","header","passport","initialize","userProperty","session"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEO,IAAMA,oDAAsB,SAAtBA,mBAAsB,MAAO;AACtCC,MAAIC,GAAJ,CAAQC,kBAAQC,IAAR,CAAa,EAAEC,OAAO,MAAT,EAAb,CAAR;AACAJ,MAAIC,GAAJ,CAAQC,kBAAQG,UAAR,CAAmB,EAAEC,UAAU,IAAZ,EAAkBF,OAAO,MAAzB,EAAnB,CAAR;AACAJ,MAAIC,GAAJ,CAAQM,qBAAWJ,IAAX,EAAR;AACJH,MAAIC,GAAJ,CAAQM,qBAAWF,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAN,MAAIC,GAAJ,CACI,6BAAc;AACZO,YAAQ,KAAK,EAAL,GAAU,EAAV,GAAe,EAAf,GAAoB,IADhB;AAEZC,UAAM,CAACC,iBAAWC,SAAZ;AAFM,GAAd,CADJ;AAMEX,MAAIC,GAAJ,CAAQ,qBAAR;AACAD,MAAIC,GAAJ,CAAQ,UAACW,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BD,QAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,QAAIE,MAAJ,CAAW,kCAAX,EAA+C,MAA/C;AACAF,QAAIE,MAAJ,CACE,8BADF,EAEE,KAFF,EAGE,MAHF,EAIE,QAJF,EAKE,KALF,EAME,SANF;AAQAF,QAAIE,MAAJ,CACE,8BADF,EAEE,+DAFF;AAIAD;AACD,GAhBD;AAiBAd,MAAIC,GAAJ,CAAQ,sBAAO,KAAP,CAAR;AACAD,MAAIC,GAAJ,CAAQe,mBAASC,UAAT,CAAoB,EAAEC,cAAc,aAAhB,EAApB,CAAR;AACAlB,MAAIC,GAAJ,CAAQe,mBAASG,OAAT,EAAR;AACA;AACD,CAjCM","file":"global-middleware.js","sourcesContent":["import express from 'express';\r\nimport logger from 'morgan';\r\nimport cors from 'cors';\r\nimport bodyParser from 'body-parser';\r\nimport cookieSession from 'cookie-session';\r\nimport passport from 'passport';\r\nimport { mainConfig } from '../config/main.config';\r\nimport { configureJWTStrategy } from './passport-jwt';\r\n\r\nexport const setGlobalMiddleware = app => {\r\n    app.use(express.json({ limit: '50mb' }));\r\n    app.use(express.urlencoded({ extended: true, limit: '50mb' }));\r\n    app.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(\r\n    cookieSession({\r\n      maxAge: 30 * 24 * 60 * 60 * 1000,\r\n      keys: [mainConfig.cookieKey]\r\n    })\r\n  );\r\n  app.use(cors());\r\n  app.use((req, res, next) => {\r\n    res.header('Access-Control-Allow-Origin', '*');\r\n    res.header('Access-Control-Allow-Credentials', 'true');\r\n    res.header(\r\n      'Access-Control-Allow-Methods',\r\n      'GET',\r\n      'POST',\r\n      'DELETE',\r\n      'PUT',\r\n      'OPTIONS'\r\n    );\r\n    res.header(\r\n      'Access-Control-Allow-Headers',\r\n      'Origin, X-Requested-With, Content-Type, Accept, Authorization'\r\n    );\r\n    next();\r\n  });\r\n  app.use(logger('dev'));\r\n  app.use(passport.initialize({ userProperty: 'currentUser' }));\r\n  app.use(passport.session());\r\n  configureJWTStrategy();\r\n};"]}